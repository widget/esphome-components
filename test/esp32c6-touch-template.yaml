esphome:
  name: rename_me
  name_add_mac_suffix: false

external_components:
  - source: github://widget/esphome-components
    components: [ axs5106 ]
    refresh: 0s

logger:
  level: DEBUG
api:

ota:

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password


esp32:
  board: esp32-c6-devkitc-1
  variant: esp32c6
  flash_size: 4MB
  framework:
    type: esp-idf

i2c:
  - id: bus_a
    sda: 18
    scl: 19
    frequency: 400kHz
    scan: false

spi:
  clk_pin: 1
  miso_pin: 3
  mosi_pin: 2

# one_wire:
#   - pin: 10
#     platform: gpio

button:
  - platform: safe_mode
    name: "(Safe Mode)"
    icon: mdi:restart-alert
    id: "${id}_safe_mode"
    entity_category: config
    disabled_by_default: True
  - platform: restart
    name: "Restart"
    icon: mdi:restart
    id: "${id}_restart"
    disabled_by_default: True
  - platform: shutdown
    name: "Shutdown"
    id: "${id}_shutdown"
    disabled_by_default: True


time:
  - platform: homeassistant
    id: time_comp


binary_sensor:
  - platform: gpio
    pin: 
      number: 9
      inverted: true
      # This is the BOOT button, but we're only reading it
      ignore_strapping_warning: true
    id: boot
    # no name
    filters:
      - delayed_on: 10ms
    on_release:
      - script.execute: wakeup


output:
  - platform: ledc
    pin: 23
    id: lcd_backlight
    frequency: 1000 Hz


number:
  - platform: template
    internal: true # Don't tell HA
    id: display_brightness
    optimistic: true
    min_value: 0
    max_value: 100
    step: 5
    initial_value: 20
    restore_value: true
    mode: slider
    on_value:
      then:
        - output.set_level:
            id: lcd_backlight
            level: !lambda "return x / 100.0;"
        - lvgl.slider.update:
            id: backlight_slider
            value: !lambda return x;

touchscreen:
  platform: axs5106
  id: my_touchscreen
  interrupt_pin: 21
  reset_pin: 20
  calibration:
    x_min: 0
    y_min: 0
    y_max: 320
    x_max: 172
  transform:
    mirror_x: True
  on_release:
    - script.execute: wakeup

display:
  - platform: ili9xxx
    model: ST7789V
    cs_pin: 14
    dc_pin:
      number: 15
      ignore_strapping_warning: true
    reset_pin: 22
    id: tft_ha
    data_rate: 80MHz
    invert_colors: false
    auto_clear_enabled: false
    update_interval: never
    dimensions:
      width: 172
      height: 320
      offset_width: 34
    transform:
      mirror_x: True